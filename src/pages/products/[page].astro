---
export const prerender = false;
import { actions } from "astro:actions";
import Layout from "src/layouts/Layout.astro";
import ProductCard from "src/components/react/composables/ProductCard";
import ThePagination from "src/components/astro/navigations/ThePagination.astro";
const {page} = Astro.params;
const {data} = await Astro.callAction(actions.product.getAllProducts, {page: page || "1"});
---

<Layout>
    <main class="w-full min-h-screen bg-base-200 p-4 py-12">
        <div class="grid  xl:grid-cols-3 md:grid-cols-2 gap-x-4 gap-y-8 place-items-center mx-auto max-w-screen-xl mb-6">
        {
            data?.map((product)=>(
                <ProductCard id_item={product._id.toString()} title={product.title!} stock={product.stock!} description={product.description!} client:idle />
            ))
        }
        </div>

        <ThePagination page={parseInt(page!)} />
    </main>
</Layout>